<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>CGN JoyManna Radio</title>
    <style>
        /* (ìŠ¤íƒ€ì¼ ì‹œíŠ¸ëŠ” ì´ì „ê³¼ ë™ì¼í•©ë‹ˆë‹¤) */
        body {
            font-family: "Noto Sans KR", sans-serif;
            /*display: flex;*/
            background-color: #ffffff;
            background: linear-gradient(135deg, #141e30, #243b55);
            text-align: center;
            padding: 1px 1px;
        }
        .radio-container {
            text-align: center;
            background: #0000;
            background-color: #00000;
            padding: 2px;
            border-radius: 15px;
            max-width: 700px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }
        h1 {
            font-size: 1.0rem;
            margin-bottom: 5px;
        }
        
        #current-time {
            font-size: 0.9rem;
            margin-bottom: 5px;
            color: #ccc;
        }

        #info {
            font-size: 0.9rem;
            margin-bottom: 10px;
            font-weight: bold;
            min-height: 20px; 
        }

        audio {
            width: 90%;
            margin-top: 5px;
            background-color: #333;
            border-radius: 5px;
        }

        #playBtn {
            margin-top: 10px;
            background: #00bcd4;
            border: none;
            padding: 8px 20px;
            border-radius: 10px;
            color: white;
            font-size: 1.0rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        #playBtn:hover {
            background: #0097a7;
        }
        
        #statusMessage {
            font-size: 0.9rem;
            color: #ffcc00;
            margin-top: 5px;
            min-height: 10px;
        }
    </style>
</head>
<body>
    <div class="radio-container">
        <h1>ğŸ¶ CGN JoyManna Radio</h1>
        <p id="current-time">Loading Current Time...</p>
        <p id="info">On-Air: Click to Play now...</p>
    
        <audio id="player" controls loop></audio><br/>
        <button id="playBtn">â–¶ Play</button>
        <p id="statusMessage"></p>
    </div>

<script>
    const player = document.getElementById("player");
    const info = document.getElementById("info");
    const playBtn = document.getElementById("playBtn");
    const statusMessageEl = document.getElementById("statusMessage");
    const currentTimeEl = document.getElementById("current-time");
    const debug=0;

    // ê¸°ë³¸ GitHub Pages URL (ì‚¬ìš©ìë‹˜ì˜ ì €ì¥ì†Œ ì£¼ì†Œ)
    // ë°˜ë“œì‹œ ì‹¤ì œ ì£¼ì†Œë¡œ ë°”ê¿”ì£¼ì„¸ìš”! (ì˜ˆ: https://andrewkangkl-design.github.io/CGN_JoyManna/)
    const BASE_URL = "https://andrewkangkl-design.github.io/CGN_JoyManna/";
    
    const DAYS = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];
    
    // ì‹œê°„ê³¼ ë¶„ì„ ë°›ì•„ì„œ í•˜ë£¨ì˜ ì´ ë¶„(minute)ìœ¼ë¡œ ê³„ì‚°í•˜ëŠ” í—¬í¼ í•¨ìˆ˜
    function timeToMinutes(hour, minute) {
        return hour * 60 + minute;
    }

    // â˜…â˜…â˜… ìŠ¤ì¼€ì¤„ ë°ì´í„°: ìš”ì¼ë³„, ì‹œê°„ëŒ€ë³„ ì„¤ì • â˜…â˜…â˜…
    // íŒŒì¼ëª…ì€ 'HHMM.mp3' í˜•íƒœë¡œ í´ë” ì•ˆì— ìœ„ì¹˜í•œë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.
    const SCHEDULE_CONFIG = {
        // [ì‹œ, ë¶„]ì€ í•´ë‹¹ í”„ë¡œê·¸ë¨ì´ ì‹œì‘í•˜ëŠ” ì‹œì ì…ë‹ˆë‹¤. (íŒŒì¼ ì´ë¦„ê³¼ ì¼ì¹˜)
        // [ì‹œ, ë¶„]ì€ í•´ë‹¹ í”„ë¡œê·¸ë¨ì´ ëë‚˜ëŠ” ì‹œì ì…ë‹ˆë‹¤. (ë‹¤ìŒ í”„ë¡œê·¸ë¨ ì‹œì‘ 1ë¶„ ì „)

        'sun': [
            // 10:00 ì— ì‹œì‘ (íŒŒì¼ëª…: sun/1000.mp3) -> 11:30ê¹Œì§€
            { start: [10, 0], end: [11, 30], name: "ì£¼ì¼ ì˜¤ì „ ì˜ˆë°°", file: "1000.mp3" },
            // 18:00 ì— ì‹œì‘ (íŒŒì¼ëª…: sun/1800.mp3) -> 23:59ê¹Œì§€
            { start: [18, 0], end: [23, 59], name: "ì£¼ì¼ ì €ë… ê¸°ë„", file: "1800.mp3" },
            // 00:00 ì— ì‹œì‘ (íŒŒì¼ëª…: sun/0000.mp3) -> 09:59ê¹Œì§€
            { start: [0, 0], end: [9, 59], name: "ì£¼ì¼ ìƒˆë²½ ì°¬ì–‘", file: "0000.mp3" },
        ],
        'mon': [
            // 06:00 ì— ì‹œì‘ (íŒŒì¼ëª…: mon/0600.mp3) -> 11:59ê¹Œì§€
            { start: [6, 0], end: [11, 59], name: "Monday praise", file: "0600.mp3" },
            // 12:00 ì— ì‹œì‘ (íŒŒì¼ëª…: mon/1200.mp3) -> 17:29ê¹Œì§€
            { start: [12, 0], end: [17, 29], name: "Good afternoon", file: "1200.mp3" },
            // 17:30 ì— ì‹œì‘ (íŒŒì¼ëª…: mon/1730.mp3) -> 23:59ê¹Œì§€
            { start: [17, 30], end: [23, 59], name: "ì›”ìš” ì €ë… ê¸°ë„ ìŒì•…", file: "1730.mp3" },
            // 00:00 ì— ì‹œì‘ (íŒŒì¼ëª…: mon/0000.mp3) -> 05:59ê¹Œì§€
            { start: [0, 0], end: [5, 59], name: "ì›”ìš” ìƒˆë²½ ë¬µìƒ", file: "0000.mp3" },
        ],
        'tue': [
            // 06:00 ì— ì‹œì‘ (íŒŒì¼ëª…: tue/0600.mp3) -> 11:59ê¹Œì§€
            { start: [6, 0], end: [6, 59], name: "Tuesday Morning Paise", file: "0900.mp3" },
            // 11:00 ì— ì‹œì‘ (íŒŒì¼ëª…: tue/1200.mp3) -> 11:59ê¹Œì§€
            { start: [11, 0], end: [11, 59], name: "í™”ìš” ë‚® ì„¤êµ ë°©ì†¡", file: "1100.mp3" },
            // 17:30 ì— ì‹œì‘ (íŒŒì¼ëª…: tue/1730.mp3) -> 23:59ê¹Œì§€
            { start: [12, 00], end: [13, 00], name: "í™”ìš” ê¸°ë„ ìŒì•…", file: "1200.mp3" },
            // 13:00 ì— ì‹œì‘ (íŒŒì¼ëª…: tue/1300.mp3) -> 14:59ê¹Œì§€
            { start: [13, 0], end: [13, 59], name: "í™”ìš” ì°¬ì–‘", file: "0900.mp3" }, //ì„ì‹œë¡œ íŒŒì¼ í• ë‹¹
            // 14:00 ì— ì‹œì‘ (íŒŒì¼ëª…: tue/0000.mp3) -> 05:59ê¹Œì§€
            { start: [14, 00], end: [15, 00], name: "í™”ìš” ì˜¤í›„ ê¸°ë„ ìŒì•…", file: "1000.mp3" }, //ì„ì‹œë¡œ íŒŒì¼ í• ë‹¹
            // 00:00 ì— ì‹œì‘ (íŒŒì¼ëª…: tue/0000.mp3) -> 05:59ê¹Œì§€
            { start: [18, 0], end: [18, 59], name: "í™”ìš” ì €ë… ë¬µìƒ", file: "1100.mp3" }, //ì„ì‹œë¡œ íŒŒì¼ í• ë‹¹
        ],
        'wed': [
            // 06:00 ì— ì‹œì‘ (íŒŒì¼ëª…: wed/0600.mp3) -> 11:59ê¹Œì§€
            { start: [6, 0], end: [6, 59], name: "ìˆ˜ìš” ì•„ì¹¨ ì°¬ì–‘", file: "0900.mp3" },
            // 11:00 ì— ì‹œì‘ (íŒŒì¼ëª…: wed/1200.mp3) -> 11:59ê¹Œì§€
            { start: [11, 0], end: [11, 59], name: "ìˆ˜ìš” ë‚® ì„¤êµ ë°©ì†¡", file: "1100.mp3" },
            // 17:30 ì— ì‹œì‘ (íŒŒì¼ëª…: wed/1730.mp3) -> 23:59ê¹Œì§€
            { start: [12, 00], end: [13, 00], name: "ìˆ˜ìš” ê¸°ë„ ìŒì•…", file: "1200.mp3" },
            // 13:00 ì— ì‹œì‘ (íŒŒì¼ëª…: wed/1300.mp3) -> 14:59ê¹Œì§€
            { start: [13, 0], end: [13, 59], name: "ìˆ˜ìš” í™œê¸°ì°¬ì˜¤í›„", file: "0900.mp3" },
            // 14:00 ì— ì‹œì‘ (íŒŒì¼ëª…: wed/0000.mp3) -> 05:59ê¹Œì§€
            { start: [14, 00], end: [15, 00], name: "2ì‹œì— ë§Œë‚˜ìš”", file: "1000.mp3" },
            // 00:00 ì— ì‹œì‘ (íŒŒì¼ëª…: wed/0000.mp3) -> 05:59ê¹Œì§€
            { start: [18, 0], end: [18, 59], name: "ìˆ˜ìš” ì €ë… ë¬µìƒ", file: "1100.mp3" },
        ],
        'thu': [
            // 06:00 ì— ì‹œì‘ (íŒŒì¼ëª…: thu/0600.mp3) -> 11:59ê¹Œì§€
            { start: [6, 0], end: [6, 59], name: "ëª©ìš” ì•„ì¹¨ ì°¬ì–‘", file: "0900.mp3" },
            // 11:00 ì— ì‹œì‘ (íŒŒì¼ëª…: thu/1200.mp3) -> 11:59ê¹Œì§€
            { start: [11, 0], end: [11, 59], name: "ëª©ìš” ë‚® ì„¤êµ ë°©ì†¡", file: "1100.mp3" },
            // 17:30 ì— ì‹œì‘ (íŒŒì¼ëª…: thu/1730.mp3) -> 23:59ê¹Œì§€
            { start: [12, 00], end: [13, 00], name: "ëª©ìš” ê¸°ë„ ìŒì•…", file: "1200.mp3" },
            // 13:00 ì— ì‹œì‘ (íŒŒì¼ëª…: thu/1300.mp3) -> 14:59ê¹Œì§€
            { start: [13, 0], end: [13, 59], name: "ëª©ìš” í™œê¸°ì°¬ì˜¤í›„", file: "1000.mp3" },
            // 14:00 ì— ì‹œì‘ (íŒŒì¼ëª…: thu/0000.mp3) -> 05:59ê¹Œì§€
            { start: [14, 00], end: [15, 00], name: "ëª©ìš” 2ì‹œì…ë‹ˆë‹¤", file: "1100.mp3" },
            // 00:00 ì— ì‹œì‘ (íŒŒì¼ëª…: thu/0000.mp3) -> 05:59ê¹Œì§€
            { start: [18, 0], end: [18, 59], name: "ëª©ìš” ì €ë… ë¬µìƒ", file: "1200.mp3" },
        ],
        'fri': [
            // 06:00 ì— ì‹œì‘ (íŒŒì¼ëª…: fri/0600.mp3) -> 11:59ê¹Œì§€
            { start: [6, 0], end: [6, 59], name: "ê¸ˆìš” ì•„ì¹¨ ì°¬ì–‘", file: "0900.mp3" },
            // 11:00 ì— ì‹œì‘ (íŒŒì¼ëª…: fri/1200.mp3) -> 11:59ê¹Œì§€
            { start: [11, 0], end: [11, 59], name: "ê¸ˆìš” ë‚® ì„¤êµ ë°©ì†¡", file: "1100.mp3" },
            // 17:30 ì— ì‹œì‘ (íŒŒì¼ëª…: fri/1730.mp3) -> 23:59ê¹Œì§€
            { start: [12, 00], end: [13, 00], name: "ê¸ˆìš” Selamat Tenga Hari", file: "1200.mp3" },
            // 13:00 ì— ì‹œì‘ (íŒŒì¼ëª…: fri/1300.mp3) -> 14:59ê¹Œì§€
            { start: [13, 0], end: [13, 59], name: "ê¸ˆìš” ì •ì˜¤ì˜ ë§Œë‚¨", file: "1000.mp3" },
            // 14:00 ì— ì‹œì‘ (íŒŒì¼ëª…: fri/0000.mp3) -> 05:59ê¹Œì§€
            { start: [14, 00], end: [15, 00], name: "ê¸ˆìš” 2ì‹œì…ë‹ˆë‹¤", file: "1100.mp3" },
            // 00:00 ì— ì‹œì‘ (íŒŒì¼ëª…: fri/0000.mp3) -> 05:59ê¹Œì§€
            { start: [18, 0], end: [18, 59], name: "ê¸ˆìš” ì €ë… ë¬µìƒ", file: "1200.mp3" },
        ],
        // ğŸš¨ Tue, Wed, Thu, Fri, Sat ë„ ìœ„ì™€ ê°™ì€ í˜•íƒœë¡œ ì„¤ì •í•´ ì£¼ì„¸ìš”!
    };
    
    // í˜„ì¬ëŠ” í™”ìš”ì¼ì…ë‹ˆë‹¤ (Current time is Tuesday, December 16, 2025)
    // ë”°ë¼ì„œ 'tue' ìŠ¤ì¼€ì¤„ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ìœ¼ë¡œ ëŒ€ì²´ë©ë‹ˆë‹¤.
    
    // í˜„ì¬ ìŠ¤ì¼€ì¤„ì„ ì°¾ê³  URLì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
    function getCurrentProgram() {
        const now = new Date();
        const dayIndex = now.getDay(); // 0 (ì¼) ~ 6 (í† )
        const dayKey = DAYS[dayIndex]; // 'sun', 'mon', 'tue', ...
        const currentMinutes = now.getHours() * 60 + now.getMinutes();

        // 1. í•´ë‹¹ ìš”ì¼ì˜ ìŠ¤ì¼€ì¤„ í™•ì¸
        let todaySchedule = SCHEDULE_CONFIG[dayKey];
        let program = null;

        if (todaySchedule) {
             program = todaySchedule.find(p => {
                const minStart = timeToMinutes(p.start[0], p.start[1]);
                const minEnd = timeToMinutes(p.end[0], p.end[1]);
                return currentMinutes >= minStart && currentMinutes <= minEnd;
            });
        }
        
        // 2. í•´ë‹¹ ìš”ì¼ì— ìŠ¤ì¼€ì¤„ì´ ì—†ê±°ë‚˜ ì‹œê°„ëŒ€ê°€ ë¹„ì–´ìˆìœ¼ë©´ ê¸°ë³¸ íŒŒì¼ ì¬ìƒ
        if (!program) {
            return {
                name: "Backgroud praise (No on-air schedule)",
                url: BASE_URL + "default.mp3"
            };
        }
        if(debug){
            console.log(">>>>>>> getCurrentProgram play file:" + program.url)//>>>>>>>>>>>getCurrentProgramì—ì„œ ì°¾ì€ url
        }
        // 3. ì°¾ì€ í”„ë¡œê·¸ë¨ì˜ URL ìƒì„± (ì˜ˆ: BASE_URL + 'mon/' + '0600.mp3')
        return {
            name: program.name,
            //url: BASE_URL + dayKey + "/" + program.file //ì„ì‹œë¡œ í™”ìš”ì¼ íŒŒì¼ë§Œ play í•˜ë„ë¡ í•¨
            url: BASE_URL + "tue" + "/" + program.file
        };
    }

    let isPlayerStarted = false; 

    function updateRadio() {
        const now = new Date();
        const program = getCurrentProgram();
        
        currentTimeEl.textContent = "Current Time: " + now.toLocaleTimeString('ko-KR', { hour12: false }) + " (" + 
                                   ['Sun', 'Mon', 'Tues', 'Wednes', 'Thurth', 'Fri', 'Sature'][now.getDay()] + "day)";

        if (program) {
            info.textContent = `On-Air: ${program.name}`;
            //console.log("íŒŒì¼ URL:"+ program.url);
            if (isPlayerStarted) {
                // 1. URLì´ ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸ (ë‹¤ìŒ ìŠ¤ì¼€ì¤„ ì‹œê°„ëŒ€ë¡œ ë„˜ì–´ê°)
                if (player.src !== program.url) {
                    player.src = program.url;
                    player.load(); 
                    
                    player.play().then(() => {
                        statusMessageEl.textContent = "";
                        playBtn.style.display = "none";
                        if (debug) {
                            console.log(">>> ì¬ìƒ ì„±ê³µ: "+ program.url);
                        }
                    }).catch(err => {
                        console.error("Failed auto play:", err);
                        statusMessageEl.textContent = "â— It is blocked Play. Please Click the Play button.";
                        playBtn.style.display = "block";
                    });
                } 
                                
                // 2. URLì€ ë™ì¼í•œë° í”Œë ˆì´ì–´ê°€ ë©ˆì¶°ìˆëŠ”ì§€ í™•ì¸ (íŒŒì¼ ëë‚¨)
                else if (player.paused && !player.error) { 
                    player.play().catch(err => {
                        console.error("íŒŒì¼ ì¢…ë£Œ í›„ ìë™ ì¬ì‹œë„ ì‹¤íŒ¨:", err);
                    });
                }
            } else {
                // ì¬ìƒ ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ì•¼ í•¨
                info.textContent = `Next : ${program.name} (Click the Play button)`;
                player.src = program.url; 
                playBtn.style.display = "block"; 
            }

        } else {
            // ì´ ë¡œì§ì€ ê¸°ë³¸ íŒŒì¼ (default.mp3)ì´ ì—†ëŠ” ê²½ìš°ì—ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
            info.textContent = "Now, no on-air schedule.";
            player.pause();
            player.src = ""; 
            if(isPlayerStarted) {
                 statusMessageEl.textContent = "Please wait next schedule.";
            }
            playBtn.style.display = "none";
        }
    }

    // === ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ: ì¬ìƒ ì‹œì‘ ë²„íŠ¼ ì²˜ë¦¬ ===
    playBtn.addEventListener("click", () => {
        const program = getCurrentProgram();
        
        if (!isPlayerStarted) {
            isPlayerStarted = true;
            // ìµœì´ˆ ì¬ìƒ ì‹œë„
            player.src = program.url; 
            
            player.play()
                .then(() => {
                    playBtn.style.display = "none";
                    statusMessageEl.textContent = "";
                    info.textContent = `On-Air: ${program.name}`;
                })
                .catch(error => {
                    console.error("Error:", error);
                    statusMessageEl.textContent = `Stopped Play. (ë¸Œë¼ìš°ì € ì •ì±…). Click Play button now!`;
                    isPlayerStarted = false; 
                });
        }
    });

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™” ë° ì‹œê°„ í‘œì‹œ
    updateRadio();

    // ìŠ¤ì¼€ì¤„ ë³€ê²½ì„ ì¦‰ì‹œ ê°ì§€í•˜ê¸° ìœ„í•´ 5ì´ˆë§ˆë‹¤ ì‹¤í–‰
    setInterval(updateRadio, 5000); 
</script>
</body>
</html>
