<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>ìš”ì¼ í´ë” ê¸°ë°˜ ìë™ ë¼ë””ì˜¤</title>
    <style>
        /* (ìŠ¤íƒ€ì¼ ì‹œíŠ¸ëŠ” ì´ì „ê³¼ ë™ì¼í•©ë‹ˆë‹¤) */
        body {
            font-family: "Noto Sans KR", sans-serif;
            background: linear-gradient(135deg, #141e30, #243b55);
            color: #fff;
            text-align: center;
            padding: 10px 20px;
        }

        h1 {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        
        #current-time {
            font-size: 0.9rem;
            margin-bottom: 5px;
            color: #ccc;
        }

        #info {
            font-size: 1.1rem;
            margin-bottom: 10px;
            font-weight: bold;
            min-height: 25px; 
        }

        audio {
            width: 90%;
            margin-top: 10px;
            background-color: #333;
            border-radius: 5px;
        }

        #playBtn {
            margin-top: 10px;
            background: #00bcd4;
            border: none;
            padding: 8px 20px;
            border-radius: 10px;
            color: white;
            font-size: 1.0rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        #playBtn:hover {
            background: #0097a7;
        }
        
        #statusMessage {
            font-size: 0.8rem;
            color: #ffcc00;
            margin-top: 5px;
            min-height: 15px;
        }
    </style>
</head>
<body>
    <h1>ğŸ¶ ìš”ì¼ë³„ í´ë” ê¸°ë°˜ ë¼ë””ì˜¤ ë°©ì†¡</h1>
    <p id="current-time">í˜„ì¬ ì‹œê° ë¡œë”© ì¤‘...</p>
    <p id="info">í˜„ì¬ ì¬ìƒ ì¤‘: ì‹œì‘ ëŒ€ê¸° ì¤‘...</p>
    
    <audio id="player" controls loop></audio><br/>
    <button id="playBtn">â–¶ ì¬ìƒ ì‹œì‘</button>
    <p id="statusMessage"></p>

<script>
    const player = document.getElementById("player");
    const info = document.getElementById("info");
    const playBtn = document.getElementById("playBtn");
    const statusMessageEl = document.getElementById("statusMessage");
    const currentTimeEl = document.getElementById("current-time");

    // ê¸°ë³¸ GitHub Pages URL (ì‚¬ìš©ìë‹˜ì˜ ì €ì¥ì†Œ ì£¼ì†Œ)
    // ë°˜ë“œì‹œ ì‹¤ì œ ì£¼ì†Œë¡œ ë°”ê¿”ì£¼ì„¸ìš”! (ì˜ˆ: https://andrewkangkl-design.github.io/CGN_JoyManna/)
    const BASE_URL = "https://andrewkangkl-design.github.io/CGN_JoyManna/";
    
    const DAYS = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];
    
    // ì‹œê°„ê³¼ ë¶„ì„ ë°›ì•„ì„œ í•˜ë£¨ì˜ ì´ ë¶„(minute)ìœ¼ë¡œ ê³„ì‚°í•˜ëŠ” í—¬í¼ í•¨ìˆ˜
    function timeToMinutes(hour, minute) {
        return hour * 60 + minute;
    }

    // â˜…â˜…â˜… ìŠ¤ì¼€ì¤„ ë°ì´í„°: ìš”ì¼ë³„, ì‹œê°„ëŒ€ë³„ ì„¤ì • â˜…â˜…â˜…
    // íŒŒì¼ëª…ì€ 'HHMM.mp3' í˜•íƒœë¡œ í´ë” ì•ˆì— ìœ„ì¹˜í•œë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.
    const SCHEDULE_CONFIG = {
        // [ì‹œ, ë¶„]ì€ í•´ë‹¹ í”„ë¡œê·¸ë¨ì´ ì‹œì‘í•˜ëŠ” ì‹œì ì…ë‹ˆë‹¤. (íŒŒì¼ ì´ë¦„ê³¼ ì¼ì¹˜)
        // [ì‹œ, ë¶„]ì€ í•´ë‹¹ í”„ë¡œê·¸ë¨ì´ ëë‚˜ëŠ” ì‹œì ì…ë‹ˆë‹¤. (ë‹¤ìŒ í”„ë¡œê·¸ë¨ ì‹œì‘ 1ë¶„ ì „)

        'sun': [
            // 10:00 ì— ì‹œì‘ (íŒŒì¼ëª…: sun/1000.mp3) -> 11:30ê¹Œì§€
            { start: [10, 0], end: [11, 30], name: "ì£¼ì¼ ì˜¤ì „ ì˜ˆë°°", file: "1000.mp3" },
            // 18:00 ì— ì‹œì‘ (íŒŒì¼ëª…: sun/1800.mp3) -> 23:59ê¹Œì§€
            { start: [18, 0], end: [23, 59], name: "ì£¼ì¼ ì €ë… ê¸°ë„", file: "1800.mp3" },
            // 00:00 ì— ì‹œì‘ (íŒŒì¼ëª…: sun/0000.mp3) -> 09:59ê¹Œì§€
            { start: [0, 0], end: [9, 59], name: "ì£¼ì¼ ìƒˆë²½ ì°¬ì–‘", file: "0000.mp3" },
        ],
        'mon': [
            // 06:00 ì— ì‹œì‘ (íŒŒì¼ëª…: mon/0600.mp3) -> 11:59ê¹Œì§€
            { start: [6, 0], end: [11, 59], name: "ì›”ìš” ì•„ì¹¨ ì°¬ì–‘", file: "0600.mp3" },
            // 12:00 ì— ì‹œì‘ (íŒŒì¼ëª…: mon/1200.mp3) -> 17:29ê¹Œì§€
            { start: [12, 0], end: [17, 29], name: "ì›”ìš” ë‚® ì„¤êµ ë°©ì†¡", file: "1200.mp3" },
            // 17:30 ì— ì‹œì‘ (íŒŒì¼ëª…: mon/1730.mp3) -> 23:59ê¹Œì§€
            { start: [17, 30], end: [23, 59], name: "ì›”ìš” ì €ë… ê¸°ë„ ìŒì•…", file: "1730.mp3" },
            // 00:00 ì— ì‹œì‘ (íŒŒì¼ëª…: mon/0000.mp3) -> 05:59ê¹Œì§€
            { start: [0, 0], end: [5, 59], name: "ì›”ìš” ìƒˆë²½ ë¬µìƒ", file: "0000.mp3" },
        ],
        'tue': [
            // 06:00 ì— ì‹œì‘ (íŒŒì¼ëª…: tue/0600.mp3) -> 11:59ê¹Œì§€
            { start: [6, 0], end: [6, 59], name: "í™”ìš” ì•„ì¹¨ ì°¬ì–‘", file: "0600.mp3" },
            // 11:00 ì— ì‹œì‘ (íŒŒì¼ëª…: tue/1200.mp3) -> 11:59ê¹Œì§€
            { start: [11, 0], end: [11, 59], name: "í™”ìš” ë‚® ì„¤êµ ë°©ì†¡", file: "1100.mp3" },
            // 17:30 ì— ì‹œì‘ (íŒŒì¼ëª…: tue/1730.mp3) -> 23:59ê¹Œì§€
            { start: [12, 00], end: [13, 00], name: "ì›”ìš” ì €ë… ê¸°ë„ ìŒì•…", file: "1200.mp3" },
            // 13:00 ì— ì‹œì‘ (íŒŒì¼ëª…: tue/1300.mp3) -> 14:59ê¹Œì§€
            { start: [13, 0], end: [13, 59], name: "ì›”ìš” ìƒˆë²½ ë¬µìƒ", file: "1300.mp3" },
            // 14:00 ì— ì‹œì‘ (íŒŒì¼ëª…: tue/0000.mp3) -> 05:59ê¹Œì§€
            { start: [14, 00], end: [15, 00], name: "ì›”ìš” ì €ë… ê¸°ë„ ìŒì•…", file: "1400.mp3" },
            // 00:00 ì— ì‹œì‘ (íŒŒì¼ëª…: tue/0000.mp3) -> 05:59ê¹Œì§€
            { start: [18, 0], end: [18, 59], name: "ì›”ìš” ìƒˆë²½ ë¬µìƒ", file: "1800.mp3" },
        ],
        'wed': [
            // 06:00 ì— ì‹œì‘ (íŒŒì¼ëª…: wed/0600.mp3) -> 11:59ê¹Œì§€
            { start: [6, 0], end: [6, 59], name: "í™”ìš” ì•„ì¹¨ ì°¬ì–‘", file: "0600.mp3" },
            // 11:00 ì— ì‹œì‘ (íŒŒì¼ëª…: wed/1200.mp3) -> 11:59ê¹Œì§€
            { start: [11, 0], end: [11, 59], name: "í™”ìš” ë‚® ì„¤êµ ë°©ì†¡", file: "1100.mp3" },
            // 17:30 ì— ì‹œì‘ (íŒŒì¼ëª…: wed/1730.mp3) -> 23:59ê¹Œì§€
            { start: [12, 00], end: [13, 00], name: "ì›”ìš” ì €ë… ê¸°ë„ ìŒì•…", file: "1200.mp3" },
            // 13:00 ì— ì‹œì‘ (íŒŒì¼ëª…: wed/1300.mp3) -> 14:59ê¹Œì§€
            { start: [13, 0], end: [13, 59], name: "ì›”ìš” ìƒˆë²½ ë¬µìƒ", file: "1300.mp3" },
            // 14:00 ì— ì‹œì‘ (íŒŒì¼ëª…: wed/0000.mp3) -> 05:59ê¹Œì§€
            { start: [14, 00], end: [15, 00], name: "ì›”ìš” ì €ë… ê¸°ë„ ìŒì•…", file: "1400.mp3" },
            // 00:00 ì— ì‹œì‘ (íŒŒì¼ëª…: wed/0000.mp3) -> 05:59ê¹Œì§€
            { start: [18, 0], end: [18, 59], name: "ì›”ìš” ìƒˆë²½ ë¬µìƒ", file: "1800.mp3" },
        ],
        'thu': [
            // 06:00 ì— ì‹œì‘ (íŒŒì¼ëª…: thu/0600.mp3) -> 11:59ê¹Œì§€
            { start: [6, 0], end: [6, 59], name: "í™”ìš” ì•„ì¹¨ ì°¬ì–‘", file: "0600.mp3" },
            // 11:00 ì— ì‹œì‘ (íŒŒì¼ëª…: thu/1200.mp3) -> 11:59ê¹Œì§€
            { start: [11, 0], end: [11, 59], name: "í™”ìš” ë‚® ì„¤êµ ë°©ì†¡", file: "1100.mp3" },
            // 17:30 ì— ì‹œì‘ (íŒŒì¼ëª…: thu/1730.mp3) -> 23:59ê¹Œì§€
            { start: [12, 00], end: [13, 00], name: "ì›”ìš” ì €ë… ê¸°ë„ ìŒì•…", file: "1200.mp3" },
            // 13:00 ì— ì‹œì‘ (íŒŒì¼ëª…: thu/1300.mp3) -> 14:59ê¹Œì§€
            { start: [13, 0], end: [13, 59], name: "ì›”ìš” ìƒˆë²½ ë¬µìƒ", file: "1300.mp3" },
            // 14:00 ì— ì‹œì‘ (íŒŒì¼ëª…: thu/0000.mp3) -> 05:59ê¹Œì§€
            { start: [14, 00], end: [15, 00], name: "ì›”ìš” ì €ë… ê¸°ë„ ìŒì•…", file: "1400.mp3" },
            // 00:00 ì— ì‹œì‘ (íŒŒì¼ëª…: thu/0000.mp3) -> 05:59ê¹Œì§€
            { start: [18, 0], end: [18, 59], name: "ì›”ìš” ìƒˆë²½ ë¬µìƒ", file: "1800.mp3" },
        ],
        'fri': [
            // 06:00 ì— ì‹œì‘ (íŒŒì¼ëª…: fri/0600.mp3) -> 11:59ê¹Œì§€
            { start: [6, 0], end: [6, 59], name: "í™”ìš” ì•„ì¹¨ ì°¬ì–‘", file: "0600.mp3" },
            // 11:00 ì— ì‹œì‘ (íŒŒì¼ëª…: fri/1200.mp3) -> 11:59ê¹Œì§€
            { start: [11, 0], end: [11, 59], name: "í™”ìš” ë‚® ì„¤êµ ë°©ì†¡", file: "1100.mp3" },
            // 17:30 ì— ì‹œì‘ (íŒŒì¼ëª…: fri/1730.mp3) -> 23:59ê¹Œì§€
            { start: [12, 00], end: [13, 00], name: "ì›”ìš” ì €ë… ê¸°ë„ ìŒì•…", file: "1200.mp3" },
            // 13:00 ì— ì‹œì‘ (íŒŒì¼ëª…: fri/1300.mp3) -> 14:59ê¹Œì§€
            { start: [13, 0], end: [13, 59], name: "ì›”ìš” ìƒˆë²½ ë¬µìƒ", file: "1300.mp3" },
            // 14:00 ì— ì‹œì‘ (íŒŒì¼ëª…: fri/0000.mp3) -> 05:59ê¹Œì§€
            { start: [14, 00], end: [15, 00], name: "ì›”ìš” ì €ë… ê¸°ë„ ìŒì•…", file: "1400.mp3" },
            // 00:00 ì— ì‹œì‘ (íŒŒì¼ëª…: fri/0000.mp3) -> 05:59ê¹Œì§€
            { start: [18, 0], end: [18, 59], name: "ì›”ìš” ìƒˆë²½ ë¬µìƒ", file: "1800.mp3" },
        ],
        // ğŸš¨ Tue, Wed, Thu, Fri, Sat ë„ ìœ„ì™€ ê°™ì€ í˜•íƒœë¡œ ì„¤ì •í•´ ì£¼ì„¸ìš”!
    };
    
    // í˜„ì¬ëŠ” í™”ìš”ì¼ì…ë‹ˆë‹¤ (Current time is Tuesday, December 16, 2025)
    // ë”°ë¼ì„œ 'tue' ìŠ¤ì¼€ì¤„ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ìœ¼ë¡œ ëŒ€ì²´ë©ë‹ˆë‹¤.
    
    // í˜„ì¬ ìŠ¤ì¼€ì¤„ì„ ì°¾ê³  URLì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
    function getCurrentProgram() {
        const now = new Date();
        const dayIndex = now.getDay(); // 0 (ì¼) ~ 6 (í† )
        const dayKey = DAYS[dayIndex]; // 'sun', 'mon', 'tue', ...
        const currentMinutes = now.getHours() * 60 + now.getMinutes();

        // 1. í•´ë‹¹ ìš”ì¼ì˜ ìŠ¤ì¼€ì¤„ í™•ì¸
        let todaySchedule = SCHEDULE_CONFIG[dayKey];
        let program = null;

        if (todaySchedule) {
             program = todaySchedule.find(p => {
                const minStart = timeToMinutes(p.start[0], p.start[1]);
                const minEnd = timeToMinutes(p.end[0], p.end[1]);
                return currentMinutes >= minStart && currentMinutes <= minEnd;
            });
        }
        
        // 2. í•´ë‹¹ ìš”ì¼ì— ìŠ¤ì¼€ì¤„ì´ ì—†ê±°ë‚˜ ì‹œê°„ëŒ€ê°€ ë¹„ì–´ìˆìœ¼ë©´ ê¸°ë³¸ íŒŒì¼ ì¬ìƒ
        if (!program) {
            return {
                name: "ê¸°ë³¸ ë°°ê²½ ìŒì•… (ìŠ¤ì¼€ì¤„ ì—†ìŒ)",
                url: BASE_URL + "default.mp3"
            };
        }
        
        // 3. ì°¾ì€ í”„ë¡œê·¸ë¨ì˜ URL ìƒì„± (ì˜ˆ: BASE_URL + 'mon/' + '0600.mp3')
        return {
            name: program.name,
            url: BASE_URL + dayKey + "/" + program.file
        };
    }

    let isPlayerStarted = false; 

    function updateRadio() {
        const now = new Date();
        const program = getCurrentProgram();
        
        currentTimeEl.textContent = "í˜„ì¬ ì‹œê°: " + now.toLocaleTimeString('ko-KR', { hour12: false }) + " (" + 
                                   ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '][now.getDay()] + "ìš”ì¼)";

        if (program) {
            info.textContent = `í˜„ì¬ ì¬ìƒ ì¤‘: ${program.name}`;
            
            if (isPlayerStarted) {
                // 1. URLì´ ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸ (ë‹¤ìŒ ìŠ¤ì¼€ì¤„ ì‹œê°„ëŒ€ë¡œ ë„˜ì–´ê°)
                if (player.src !== program.url) {
                    player.src = program.url;
                    player.load(); 
                    
                    player.play().then(() => {
                        statusMessageEl.textContent = "";
                        playBtn.style.display = "none";
                    }).catch(err => {
                        console.error("ìë™ ì „í™˜ ì¬ìƒ ì‹¤íŒ¨:", err);
                        statusMessageEl.textContent = "â— ìë™ ì¬ìƒì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ì¬ìƒ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.";
                        playBtn.style.display = "block";
                    });
                } 
                // 2. URLì€ ë™ì¼í•œë° í”Œë ˆì´ì–´ê°€ ë©ˆì¶°ìˆëŠ”ì§€ í™•ì¸ (íŒŒì¼ ëë‚¨)
                else if (player.paused && !player.error) { 
                    player.play().catch(err => {
                        console.error("íŒŒì¼ ì¢…ë£Œ í›„ ìë™ ì¬ì‹œë„ ì‹¤íŒ¨:", err);
                    });
                }
            } else {
                // ì¬ìƒ ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ì•¼ í•¨
                info.textContent = `ë‹¤ìŒ ë°©ì†¡: ${program.name} (ì¬ìƒ ëŒ€ê¸° ì¤‘)`;
                player.src = program.url; 
                playBtn.style.display = "block"; 
            }

        } else {
            // ì´ ë¡œì§ì€ ê¸°ë³¸ íŒŒì¼ (default.mp3)ì´ ì—†ëŠ” ê²½ìš°ì—ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
            info.textContent = "í˜„ì¬ëŠ” ë°©ì†¡ ì‹œê°„ëŒ€ê°€ ì•„ë‹™ë‹ˆë‹¤.";
            player.pause();
            player.src = ""; 
            if(isPlayerStarted) {
                 statusMessageEl.textContent = "ë‹¤ìŒ ë°©ì†¡ ì‹œê°„ëŒ€ë¥¼ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.";
            }
            playBtn.style.display = "none";
        }
    }

    // === ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ: ì¬ìƒ ì‹œì‘ ë²„íŠ¼ ì²˜ë¦¬ ===
    playBtn.addEventListener("click", () => {
        const program = getCurrentProgram();
        
        if (!isPlayerStarted) {
            isPlayerStarted = true;
            // ìµœì´ˆ ì¬ìƒ ì‹œë„
            player.src = program.url; 
            
            player.play()
                .then(() => {
                    playBtn.style.display = "none";
                    statusMessageEl.textContent = "";
                    info.textContent = `í˜„ì¬ ì¬ìƒ ì¤‘: ${program.name}`;
                })
                .catch(error => {
                    console.error("ì²« ì¬ìƒ ì˜¤ë¥˜:", error);
                    statusMessageEl.textContent = `ì¬ìƒì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. (ë¸Œë¼ìš°ì € ì •ì±…). ë²„íŠ¼ì„ ë‹¤ì‹œ ëˆŒëŸ¬ì£¼ì„¸ìš”.`;
                    isPlayerStarted = false; 
                });
        }
    });

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™” ë° ì‹œê°„ í‘œì‹œ
    updateRadio();

    // ìŠ¤ì¼€ì¤„ ë³€ê²½ì„ ì¦‰ì‹œ ê°ì§€í•˜ê¸° ìœ„í•´ 5ì´ˆë§ˆë‹¤ ì‹¤í–‰
    setInterval(updateRadio, 5000); 
</script>
</body>
</html>
